---
title: Scala 3に切り替えていた
---

# やったこと

## Recheck

Scala 3へと切り替えるPRを作った。

<https://github.com/makenowjust-labs/recheck/pull/1651>

`scoverage` が Scala.js + Scala 3 のときに問題があるっぽいので、その場合は `coverageEnabled := false` として対処した。
あと`project`以下のSBTから読まれてソース生成に使われるコードが`scalafmt`で構文エラーになるので、そのために設定を更新した。面倒すぎる。

GitHub ActionsのワークフローとかでScalaのバージョンに依存してしまうのはどうしたらいいんだろう？
ワークフロー内ならともかく、外側のJavaScript周りはどうしようも無い気がするな。

あとなんかカバレッジが下がっていた。なぜだろう。

`dialect` の方も Scala 3の構文に対応した。
こっちは `-rewrite` をフル活用した。分量が多い。
`enum` をいい感じに使うように直していきたいが‥‥。

## Scala

来てる。

<https://scala-tokyo.connpass.com/event/371493/>

[SBT 2の話](https://xuwei-k.github.io/slides/sbt-2-waiwai-2025/#1)を聞いている。
プラグイン対応どんなもんなのかなぁと思っていたら、[まとめたページ](https://github.com/sbt/sbt/wiki/sbt-2.x-plugin-migration)があるらしい。
`scalajs`, `sbt-native-image`, `sbt-crossproject` 辺りがまだ対応できてないっぽい。
結構クリティカルだなぁ。
とはいえ研究のプロジェクトでは使える気がするので使っていきたい。

## ZA

1000人勝利を達成してひかるおまもりを手に入れた。
ここまで長かった‥‥。
せっかくだし色違い厳選するか。
