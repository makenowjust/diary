{"componentChunkName":"component---src-templates-post-js","path":"/post/2020-09-17-diary/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>Scala</h2>\n<p>継続渡し形式でパーサを実装したcontparseをparsersに追加した。<br>\nベンチマークはこんな感じ。</p>\n<pre><code>[info] Benchmark                        Mode  Cnt     Score      Error  Units\n[info] Bench.measureAtto               thrpt    3    91.843 ±   11.941  ops/s\n[info] Bench.measureContparse          thrpt    3   654.457 ±   22.933  ops/s\n[info] Bench.measureFastparse          thrpt    3  2985.297 ± 1257.443  ops/s\n[info] Bench.measureFuncparse          thrpt    3   939.816 ±   75.651  ops/s\n[info] Bench.measureInlineparse        thrpt    3  2443.197 ±  134.639  ops/s\n[info] Bench.measureParserCombinators  thrpt    3   361.384 ±    9.838  ops/s\n[info] Bench.measureStackparse         thrpt    3   518.859 ±  223.687  ops/s\n</code></pre>\n<p>stackparseと同じくらいなのはわりと予想通り。でもちょっと速いのは意外だった。<br>\nというかなんでこんなにattoは遅いんだ。ほとんどやってること変わらないはずなのに。<br>\n<code>Eval</code>のオーバーヘッドなのかな。</p>\n<p>CPSの都合でスタックが簡単に溢れるので、<code>TailRec</code>を使っている。<br>\n想像よりも<code>TailRec</code>は速いっぽいことが分かった。</p>\n<p>あと、実装は大体stackparseをコピペして、継続オブジェクトを返している部分を呼び出しに書き換えている。<br>\nstackparseではパーサの呼び出しと結果の部分で継続オブジェクトを返しているのが、contparseだとパーサの呼び出しの部分でのみ<code>TailRec</code>を生成している、速度はその分の違いなのかもしれない。<br>\nうーん、難しいな。</p>\n<p>ついでにv0.2.1もリリースした。<br>\n2つもパーサー増えたしな。</p>\n<p>あとscala-automataとscala-graphも公開した。<br>\n秘伝のソースコードにしていても勿体ないので。<br>\nこの辺ももう少し色々やりたいんだけども。</p>\n<p><a href=\"https://github.com/MakeNowJust-Labo/scala-automata\" class=\"embedly-card\">https://github.com/MakeNowJust-Labo/scala-automata</a></p>\n<p><a href=\"https://github.com/MakeNowJust-Labo/scala-graph\" class=\"embedly-card\">https://github.com/MakeNowJust-Labo/scala-graph</a></p>\n<h2>シャニ</h2>\n<p>甜花ちゃんTrue。<br>\nなんかひさしぶりに一発でTrueだった気がする。<br>\nいいコミュだな。</p>\n<p><a href=\"https://twitter.com/make_now_just/status/1306605186232676353\" class=\"embedly-card\">https://twitter.com/make_now_just/status/1306605186232676353</a></p>\n<p>なんかSP使い切れたし妙にいい感じのプロデュースだった。<br>\n200万人行きたかった感はあるけど。</p>","fields":{"date":"2020-09-17"},"frontmatter":{"title":"contparseを公開した"},"excerpt":"やったこと Scala 継続渡し形式でパーサを実装したcontparseをparsersに追加した。 ベンチマークはこんな感じ。 stackparseと同じくらいなのはわりと予想通り。でもちょっと速いのは意外だった。 というかなんでこんなにattoは遅いんだ。ほとんどやってるこ…"},"prev":{"fields":{"date":"2020-09-18","slug":"/post/2020-09-18-diary/"},"frontmatter":{"title":"`.gitignore`を実装した"}},"next":{"fields":{"date":"2020-09-16","slug":"/post/2020-09-16-diary/"},"frontmatter":{"title":"minicheckを公開した"}}},"pageContext":{"slug":"/post/2020-09-17-diary/","prevSlug":"/post/2020-09-18-diary/","nextSlug":"/post/2020-09-16-diary/"}},"staticQueryHashes":["530032413"],"slicesMap":{}}