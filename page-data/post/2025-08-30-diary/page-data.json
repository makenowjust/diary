{"componentChunkName":"component---src-templates-post-js","path":"/post/2025-08-30-diary/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>RubyKaigi 2025 follow up</h2>\n<p>発表してきた。<br>\n発表スライドは以下の通り。<br>\n前日に気合いで作った。</p>\n<p><a href=\"https://speakerdeck.com/makenowjust/recent-my-study-and-ruby-contributions\" class=\"embedly-card\">https://speakerdeck.com/makenowjust/recent-my-study-and-ruby-contributions</a></p>\n<p>時間を5分に収められなくて申し訳なかった。<br>\n5分収まるわけないだろ。<br>\n来年からは15分枠にするようにします。</p>\n<p>KiriMochiという名前が刺さったみたいで良かった。</p>\n<p>発表前後の暇な時間はKiriMochiを色々なRuby実装で動かしてみていた。<br>\nTruffleRubyがやけに遅いと思ったけれど、見ていたのがCPU時間で、なんか謎に5コアぶん動いているっぽく、5倍の時間が表示されているだけだった。<br>\nそれでも非JITのRubyとそんなに速度が変わらないのは意外かもしれない。</p>\n<p>あと、ささださんから聞いたのだけど、多重代入はブロックの末尾にあるとき、戻り値のために配列のアロケーションが起こるらしい。<br>\nつまり、次の2つは実行速度の点で後者が有利、らしい。</p>\n<pre><code class=\"hljs language-ruby\"><span class=\"hljs-number\">1000_000</span>.times <span class=\"hljs-keyword\">do</span>\n  a, b = <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>\n<span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-number\">1000_000</span>.times <span class=\"hljs-keyword\">do</span>\n  a, b = <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>\n  <span class=\"hljs-literal\">nil</span>\n<span class=\"hljs-keyword\">end</span></code></pre>\n<p>あと、YJITだとアロケーションの無い多重代入は中間変数を使った場合と同様の最適化がされるっぽくて、パフォーマンスがほぼ同じだった。<br>\nこの辺りは後でちゃんとまとめたい。</p>","fields":{"date":"2025-08-30"},"frontmatter":{"title":"RubyKaigi 2025 follow upイベントだった"},"excerpt":"やったこと RubyKaigi 2025 follow up 発表してきた。 発表スライドは以下の通り。 前日に気合いで作った。 https://speakerdeck.com/makenowjust/recent-my-study-and-ruby-contributions…"},"prev":{"fields":{"date":"2025-08-31","slug":"/post/2025-08-31-diary/"},"frontmatter":{"title":"MOS最後のリリイベだった"}},"next":{"fields":{"date":"2025-08-29","slug":"/post/2025-08-29-diary/"},"frontmatter":{"title":"SATソルバを公開した"}}},"pageContext":{"slug":"/post/2025-08-30-diary/","prevSlug":"/post/2025-08-31-diary/","nextSlug":"/post/2025-08-29-diary/"}},"staticQueryHashes":["1213933803","2548877431"],"slicesMap":{}}